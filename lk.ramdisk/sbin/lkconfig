#!/system/bin/sh
BB="/system/xbin/busybox"
SCRIPT="/system/etc/init.d/00leanKernel"

echo
echo "leanKernel configurator"
echo
echo "---"
echo "1) Keep voltage minimum at 1150mV if CPU needs it (stock & leanKernel default)."
echo "2) Remove the above vmin override (allow UV below 1.24Ghz)."
echo "3) Revert thermald to stock."
echo "4) interactiveX: set screen-off max freq to 1.1Ghz."
echo "5) interactiveX: set screen-off max freq to 810Mhz (leanKernel default)."
echo 
echo -n "Please enter a number between 1 and 5 (or press enter to exit): "

read option

$BB mount -o rw,remount /system /system

case $option in
  1) 
	$BB sed -i s/^VMIN=.*$/VMIN=1/ $SCRIPT
	$SCRIPT
	echo "vmin override re-enabled."
	;;
  2) 
	$BB sed -i s/^VMIN=.*$/VMIN=0/ $SCRIPT
	$SCRIPT
	echo "vmin override bypassed."
	;;
  3) 
	$BB cp -f /sbin/thermald /system/bin/thermald
	pkill thermald
	echo "thermald reverted to stock."
	;;
  4) 
	$BB sed -i s/^SO_MAX=.*$/SO_MAX=1134000/ $SCRIPT
	$SCRIPT
	echo "interactiveX: screen off max freq set to 1134000."
	;;
  5) 
	$BB sed -i s/^SO_MAX=.*$/SO_MAX=810000/ $SCRIPT
	$SCRIPT
	echo "interactiveX: screen off max freq set to 810000 (default)."
	;;
esac
$BB mount -r /system /system
echo
